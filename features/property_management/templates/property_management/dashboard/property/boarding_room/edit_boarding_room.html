{% extends 'property_management/dashboard/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %}Dashboard - Edit Boarding Room{% endblock %}
{% block side_content %}
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="flex justify-between">
            <h1 class="text-center text-2xl font-semibold mb-6">Edit Boarding Room</h1>
        </div>
        <div class="">
            <div class="flex gap-x-5">
                <div class="flex flex-1 flex-col gap-y-5 ">
                    <div class=" p-5 bg-gray-100 rounded-lg shadow-sm">
                        <label
                            for="{{ form.boarding_house.id_for_label }}"
                            class="mb-2 block text-base font-semibold text-gray-900 dark:text-white"
                        >Boarding House</label>
                        {{ form.boarding_house|add_class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#319b94] focus:ring-[#319b94] dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"|attr:"data-target-input:boarding-house" }}
                        {% if form.boarding_house.errors %}
                            <div
                                class="text-red-500 text-sm error">{{ form.boarding_house.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class=" p-5 bg-gray-100 rounded-lg shadow-sm">
                        <label
                            for="{{ form.name.id_for_label }}"
                            class="mb-2 block text-base font-semibold text-gray-900 dark:text-white"
                        >Room Name</label
                        >
                        {{ form.name|add_class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#319b94] focus:ring-[#319b94] dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"|attr:"placeholder:Enter room name"|attr:"data-target-input:room-name" }}
                        {% if form.name.errors %}
                            <div
                                class="text-red-500 text-sm error">{{ form.name.errors.0 }}</div>
                        {% endif %}
                    </div>
                    <div class=" p-5 bg-gray-100 rounded-lg shadow-sm">
                        <label for="{{ form.capacity.id_for_label }}"
                               class="block mb-2 text-base font-semibold text-gray-900 dark:text-white">Room Capacity</label>
                        <div class="relative flex items-center max-w-[8rem]">
                            <button type="button" id="decrement-button" data-input-counter-decrement="{{ form.capacity.id_for_label }}"
                                    class="bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:border-gray-600 hover:bg-gray-200 border border-gray-300 rounded-s-lg p-3 h-11 focus:ring-gray-100 dark:focus:ring-gray-700 focus:ring-2 focus:outline-none">
                                <i class="fa-solid fa-minus"></i>
                            </button>
                            {{ form.capacity|add_class:"bg-gray-50 border-x-0 border-gray-300 h-11 text-center text-gray-900 text-sm focus:ring-[#319b94] focus:border-[#319b94] block w-full py-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"|attr:"data-input-counter"|attr:"placeholder:1"|attr:"type:text"|attr:"data-input-counter-min:1"|attr:"data-input-counter-max:10" }}
                            <button type="button" id="increment-button" data-input-counter-increment="{{ form.capacity.id_for_label }}"
                                    class="bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600 dark:border-gray-600 hover:bg-gray-200 border border-gray-300 rounded-e-lg p-3 h-11 focus:ring-gray-100 dark:focus:ring-gray-700 focus:ring-2 focus:outline-none">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div class=" p-5 bg-gray-100 rounded-lg shadow-sm">
                        <label
                            for="{{ form.price.id_for_label }}"
                            class="mb-2 block text-base font-semibold text-gray-900 dark:text-white"
                        >Price/month</label
                        >
                        <div class="flex">
                            <div
                                class="inline-flex flex-shrink-0 items-center rounded-s-lg border border-gray-300 bg-gray-100 px-4 py-2 text-center text-base font-semibold text-gray-900 dark:border-gray-600 dark:bg-gray-700 dark:text-white"
                            >
                                <svg
                                    class="me-2 h-4 w-4"
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="32"
                                    height="32"
                                    viewBox="0 0 32 32"
                                >
                                    <path
                                        d="M1,24c0,2.209,1.791,4,4,4H27c2.209,0,4-1.791,4-4V15H1v9Z"
                                        fill="#be2a2c"
                                    ></path>
                                    <path
                                        d="M27,4H5c-2.209,0-4,1.791-4,4v8H31V8c0-2.209-1.791-4-4-4Z"
                                        fill="#1334a3"
                                    ></path>
                                    <path
                                        d="M2.316,26.947l13.684-10.947L2.316,5.053c-.803,.732-1.316,1.776-1.316,2.947V24c0,1.172,.513,2.216,1.316,2.947Z"
                                        fill="#fff"
                                    ></path>
                                    <path
                                        d="M27,4H5c-2.209,0-4,1.791-4,4V24c0,2.209,1.791,4,4,4H27c2.209,0,4-1.791,4-4V8c0-2.209-1.791-4-4-4Zm3,20c0,1.654-1.346,3-3,3H5c-1.654,0-3-1.346-3-3V8c0-1.654,1.346-3,3-3H27c1.654,0,3,1.346,3,3V24Z"
                                        opacity=".15"
                                    ></path>
                                    <path
                                        d="M27,5H5c-1.657,0-3,1.343-3,3v1c0-1.657,1.343-3,3-3H27c1.657,0,3,1.343,3,3v-1c0-1.657-1.343-3-3-3Z"
                                        fill="#fff"
                                        opacity=".2"
                                    ></path>
                                    <path
                                        d="M10.569,15.303l-1.561,.31c-.051-.26-.154-.502-.296-.715l1.323-.884-.011-.975-.975-.011-.884,1.323c-.213-.143-.455-.245-.715-.296l.31-1.561-.697-.681-.697,.681,.31,1.561c-.26,.051-.502,.154-.715,.296l-.884-1.323-.975,.011-.011,.975,1.323,.884c-.143,.213-.245,.455-.296,.715l-1.561-.31-.681,.697,.681,.697,1.561-.31c.051,.26,.154,.502,.296,.715l-1.323,.884,.011,.975,.975,.011,.884-1.323c.213,.143,.455,.245,.715,.296l-.31,1.561,.697,.681,.697-.681-.31-1.561c.26-.051,.502-.154,.715-.296l.884,1.323,.975-.011,.011-.975-1.323-.884c.143-.213,.245-.455,.296-.715l1.561,.31,.681-.697-.681-.697Z"
                                        fill="#f4d24b"
                                    ></path>
                                </svg>
                                PHP
                            </div>
                            <div class="relative w-full">
                                {{ form.price|add_class:"z-20 block w-full rounded-e-lg border border-s-2 border-gray-300 border-s-gray-50 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#319b94] focus:ring-[#319b94] dark:border-gray-600 dark:border-s-gray-700 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500"|attr:"placeholder:Enter amount"|attr:"value:500"|attr:"data-target-input:price" }}
                                {% if form.price.errors %}
                                    <div
                                        class="text-red-500 text-sm error">{{ form.price.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    <div class="p-5 bg-gray-100 rounded-lg shadow-sm">
                        <label for="{{ form.description.id_for_label }}"
                               class="mb-2 block text-base font-semibold text-gray-900 dark:text-white">
                            Description
                        </label>
                        {{ form.description|add_class:"block w-full rounded-lg border border-gray-300 bg-gray-50 p-2.5 text-sm text-gray-900 focus:border-[#319b94] focus:ring-[#319b94] dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder-gray-400 dark:focus:border-blue-500 dark:focus:ring-blue-500"|attr:"rows:4"|attr:"placeholder:Write your description here..."|attr:"data-target-input:description" }}
                        {% if form.description.errors %}
                            <div class="text-red-500 text-sm error">{{ form.description.errors.0 }}</div>
                        {% endif %}
                    </div>
                    
                    <!-- Status and Available checkbox -->
<div class="p-5 bg-gray-100 rounded-lg shadow-sm">
    <label for="{{ form.is_available.id_for_label }}"
           class="mb-2 block text-base font-semibold text-gray-900 dark:text-white">
        Status
    </label>
    <div class="flex items-center space-x-2">
        {{ form.is_available|add_class:"form-checkbox h-4 w-4 text-[#3aafa9] transition duration-150 ease-in-out rounded focus:ring-[#319b94]" }}
        <span class="text-sm text-gray-900 dark:text-white">Available</span>
    </div>
</div>
                </div>
    <!-- Image Upload -->
    <div class="flex flex-1 flex-col gap-y-5">
        <div class="p-5 bg-gray-100 rounded-lg shadow-sm">
            <div class="image-preview-container w-full max-h-[320px] overflow-y-auto mb-6 border-4 rounded-md">
                {% for image in form.initial.images %}
                    <img src="{{ image }}" class="preview hidden" alt="Image Preview">
                {% endfor %}
            </div>
            <label
                for="{{ form.images.id_for_label }}"
                class="flex h-64 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:border-gray-500"
            >
                <div class="flex flex-col items-center justify-center pb-6 pt-5">
                    <svg
                        class="mb-4 h-8 w-8 text-gray-500 dark:text-gray-400"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 20 16"
                    >
                        <path
                            stroke="currentColor"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"></path>
                    </svg>
                    <p class="mb-2 text-center text-sm text-gray-500 dark:text-gray-400">
                        Boarding House Images<br />
                        <span class="font-semibold">Click to upload</span>
                    </p>
                    <p class="text-xs text-gray-500 dark:text-gray-400">
                        Maximum of 5 images
                    </p>
                </div>
                {{ form.images|add_class:"hidden"|attr:"data-target-input:images" }}
            </label>
            {% if form.images.errors %}
                <div class="text-red-500 text-sm error">{{ form.images.errors.0 }}</div>
            {% endif %}
        </div>

        <!-- Tags Section -->
        <div class="flex flex-1 flex-col gap-y-5 mt-0">
            <fieldset class="p-5 bg-gray-100 rounded-lg shadow-sm">
                <legend
                    class="text-base font-semibold text-gray-900 dark:text-gray-300"
                >
                    Tags
                </legend>
                <div class="grid grid-flow-row grid-cols-3 gap-y-2">
                    {% for tag in form.tags.subwidgets %}
                        <div class="me-4 flex items-center">
                            <input id="{{ tag.id_for_label }}" type="checkbox"
                                   name="{{ form.tags.html_name }}"
                                   value="{{ tag.data.value }}"
                                   data-target-input="tags"
                                   class="w-4 h-4 text-[#319b94] bg-gray-100 border-gray-300 rounded focus:ring-[#319b94]"
                                    {% if tag.data.selected %}
                                       checked
                                    {% endif %}
                                >
                            <label for="{{ tag.id_for_label }}"
                                   class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">{{ tag.choice_label }}</label>
                        </div>
                    {% endfor %}
                </div>
                {% if form.tags.errors %}
                    <div class="text-red-500 text-sm error">{{ form.tags.errors.0 }}</div>
                {% endif %}
            </fieldset>
        </div>
    </div>
</div>

        </div>
        <div class="">
            {% if form.non_field_errors %}
                    <div class="text-red-500 text-sm pt-4">{{ form.non_field_errors }}</div>
                {% endif %}
            <div class="flex justify-end gap-5  p-5">
                <a href="{{ boarding_room.get_absolute_url }}"
                class="rounded-lg bg-[#319b94] px-8 py-3 text-sm font-medium text-white hover:bg-[#287b74] focus:outline-none focus:ring-4 focus:ring-[#319b94]"
                >
                    View
                </a>
                <button
                    type="submit"
                    class="rounded-lg bg-[#319b94] px-8 py-3 text-sm font-medium text-white hover:bg-[#287b74] focus:outline-none focus:ring-4 focus:ring-[#319b94]"
                    >
                    Save
                </button>
            </div>
        </div>
    </form> 
    {% for message in messages %}
        {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
            {% include 'html/modals/success_modal.html' with message=message %}
        {% endif %}
    {% endfor %}
    <script type="module" src="{% static 'js/edit_boarding_room.js' %}"></script>
{% endblock %}

