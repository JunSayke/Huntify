{% load static %}

<header>
    <nav class="fixed top-0 z-20 w-full border-b border-gray-200 bg-white dark:border-gray-600 dark:bg-gray-900">
        <div class="container mx-auto flex flex-wrap items-center justify-between px-4 py-3">
            <!-- Logo -->
            <a href="#" class="flex items-center space-x-3">
                <div class="p-2">
                    <img src="{% static 'images/logo1.png' %}" alt="Logo" class="h-10 w-10 object-cover" />
                </div>
            </a>

            <!-- Hamburger Menu (Mobile) -->
            <button
                id="menu-toggle"
                class="block md:hidden focus:outline-none"
                aria-expanded="false"
            >
                <span class="sr-only">Toggle navigation</span>
                <i class="fa-solid fa-bars text-2xl"></i>
            </button>

            <!-- Navigation Links -->
            <div id="menu" class="hidden w-full md:flex md:w-auto md:items-center">
                <ul class="flex flex-col md:flex-row md:space-x-8">
                    <li>
                        <a
                            href="{% url 'authentication:home' %}"
                            class="block text-sm font-medium text-blue-700 md:py-0"
                            aria-current="page"
                        >
                            Home
                        </a>
                    </li>
                    <li>
                        <a
                            href="{% url 'property_management:landlords' %}"
                            class="block text-sm font-medium text-gray-900 hover:text-blue-700 dark:text-white dark:hover:text-blue-500"
                        >
                            Landlord
                        </a>
                    </li>
                    <li>
                        <a
                            href="#about"
                            class="block text-sm font-medium text-gray-900 hover:text-blue-700 dark:text-white dark:hover:text-blue-500"
                        >
                            About
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col space-y-3 md:flex-row md:space-y-0 md:space-x-5 relative">
                {% if user.is_authenticated %}
                    <!-- Notification Button -->
                    <button
                        type="button"
                        class="text-gray-900 dark:text-white"
                    >
                        <i class="fa-solid fa-bell text-xl"></i>
                    </button>

                    <!-- User Dropdown -->
                    <button
                        type="button"
                        class="flex items-center rounded-full focus:outline-none"
                        id="user-menu-button"
                        aria-expanded="false"
                        onclick="document.getElementById('user-dropdown').classList.toggle('hidden')"
                    >
                        <i class="fa-solid fa-user text-xl"></i>
                    </button>

                    <!-- Static User Dropdown (Hidden by default) -->
                    <div
                        class="z-50 hidden absolute mt-2 w-40 list-none divide-y divide-gray-100 rounded-lg bg-white text-base shadow dark:divide-gray-600 dark:bg-gray-700"
                        id="user-dropdown"
                        style="top: 130%; left: -30%;"
                    >
                        <div class="px-4 py-2">
                            <span class="block text-sm text-gray-900 dark:text-white font-semibold">
                                {{ user.username }}
                            </span>
                            <span class="block truncate text-sm text-gray-500 dark:text-gray-400">
                                {{ user.email }}
                            </span>
                        </div>
                        <ul class="py-2">
                            <li>
                                <a
                                    href="{{ user.get_absolute_url }}"
                                    class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white"
                                >
                                    Profile
                                </a>
                            </li>
                            {% if user.user_type == 'landlord' %}
                                <li>
                                    <a
                                        href="{% url 'property_management:dashboard' %}"
                                        class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white"
                                    >
                                        Dashboard
                                    </a>
                                </li>
                            {% endif %}
                            <li>
                                <form method="POST" action="{% url 'authentication:logout' %}">
                                    {% csrf_token %}
                                    <button
                                        type="submit"
                                        class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:bg-gray-600 dark:hover:text-white"
                                    >
                                        Sign out
                                    </button>
                                </form>
                            </li>
                        </ul>
                    </div>
                {% else %}
                    <a
                        href="{% url 'authentication:login' %}"
                        class="block rounded-lg bg-gray-200 px-3 py-1 text-center text-sm font-medium text-gray-900 hover:bg-gray-300 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"
                    >
                        Sign In
                    </a>
                    <a
                        href="{% url 'authentication:register' %}"
                        class="block rounded-lg bg-blue-700 px-3 py-1 text-center text-sm font-medium text-white hover:bg-blue-800 dark:bg-blue-600 dark:hover:bg-blue-700"
                    >
                        Sign Up
                    </a>
                {% endif %}
                <a
                    href="{% url 'property_management:rent-a-room' %}"
                    class="block rounded-lg border border-gray-200 bg-gray-100 px-3 py-1 text-center text-sm font-medium text-gray-900 hover:border-gray-300 hover:bg-gray-200 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white"
                >
                    Rent a Room
                </a>
            </div>
        </div>
    </nav>
</header>
